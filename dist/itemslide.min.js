function matrixToArray(a){return a.substr(7,a.length-8).split(", ")}function easeOutBack(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b}function slideout(a,b,c){function d(){if(o=Date.now()-h,n)$(".itemslide_slideoutwrap").translate3d(0,i-easeOutBack(o,0,i-g,250,0)),a.savedSlide.css("opacity",l-easeOutBack(o,0,l-0,250,0)*(m?-1:1));else{if(m)return $(".itemslide_slideoutwrap").children().unwrap(),$(".itemslide_move").children().unwrap(),isExplorer&&a.children().css("height",""),a.end_animation=!0,void(o=0);$(".itemslide_move").translate3d(0-easeOutBack(o-250,0,0+a.savedSlide.width(),125,0)*(q?-1:1))}return 1==p&&($(".itemslide_slideoutwrap").children().unwrap(),a.savedSlideIndex==c.currentIndex&&$(".itemslide_move").children(":nth-child(1)").attr("class","itemslide-active"),a.savedSlideIndex!=a.children().length-1||q||a.savedSlideIndex!=c.currentIndex||(b.duration=200,a.gotoSlide(a.children().length-2)),0==a.savedSlideIndex&&0!=c.currentIndex&&(o=500),p=-1),o>=250&&(n=!1,-1!=p&&(p=1),o>=375)?($(".itemslide_move").children().unwrap(),a.removeSlide(e.index()),(0==a.savedSlideIndex&&0!=c.currentIndex||q)&&a.gotoWithoutAnimation(c.currentIndex-1),b.duration=k,o=0,void(a.end_animation=!0)):void(j=requestAnimationFrame(d))}var e,f,g=-400,h=Date.now(),i=0,j=0,k=0,l=0;a.end_animation=!0;var m=!1;a.swipeOut=function(){i=$(".itemslide_slideoutwrap").translate3d().y,f=0>i,g=f?-400:400,Math.abs(0-i)<50?(m=!0,g=0):(m=!1,a.trigger({type:"swipeout",slide:a.savedSlideIndex})),p=0,k=b.duration,e=a.savedSlide,h=Date.now(),l=a.savedSlide.css("opacity"),a.savedSlideIndex<c.currentIndex?(q=!0,a.children(":nth-child(-n+"+(a.savedSlideIndex+1)+")").wrapAll("<div class='itemslide_move' />")):(q=!1,a.children(":nth-child(n+"+(a.savedSlideIndex+2)+")").wrapAll("<div class='itemslide_move' />")),n=!0,a.end_animation=!1,j=requestAnimationFrame(d)};var n=!0,o=0,p=0,q=!1}!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var isExplorer=!1||!!document.documentMode;$(function(){"use strict";$.fn.itemslide=function(a){function b(a){if("touchmove"==a.type?(y=null==$.fn.jquery?a.changedTouches[0]:a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],Math.abs(y.pageX-A)>10&&(C=1),C&&a.preventDefault()):(y=a,r.disable_slide||r.swipe_out||a.preventDefault()),k=-(y.pageX-A)>0?1:-1,f()?E&&(F=y.pageX,E=0):(E||(p.currentLandPos=p.translate3d().x,A=y.pageX),E=1),1==G&&(isExplorer&&p.children().css("height",t.slideHeight),p.savedSlide.wrapAll("<div class='itemslide_slideoutwrap' />"),G=-1),Math.abs(y.pageX-A)>6&&(!n&&p.end_animation&&(o=!0),cancelAnimationFrame(j)),Math.abs(y.pageY-B)>6&&!o&&p.end_animation&&(n=!0),o){if(r.disable_slide)return;n=!1,p.translate3d((0==E?F-A+(y.pageX-F)/4:y.pageX-A)+p.currentLandPos),p.trigger("changePos"),p.trigger("pan")}else n&&r.swipe_out&&(a.preventDefault(),$(".itemslide_slideoutwrap").translate3d(0,y.pageY-B),-1!=G&&(G=1))}function c(a){p.children(".itemslide-active").removeClass("itemslide-active"),p.children(":nth-child("+(a+1||0)+")").addClass("itemslide-active"),a!=r.currentIndex&&(t.currentIndex=a,p.trigger("changeActiveIndex"))}function d(a){for(var b=0;b<p.children("li").length;b++)if(p.children().outerWidth(!0)*b+p.children().outerWidth(!0)/2-p.children().outerWidth(!0)*r.pan_threshold*k-e(0)>a)return r.one_item?b!=t.currentIndex?t.currentIndex+1*k:t.currentIndex:b;return r.one_item?t.currentIndex+1:p.children("li").length-1}function e(a){return-(a*p.children().outerWidth(!0)-(p.parent().outerWidth(!0)-p.children().outerWidth(!0))/2)}function f(){return Math.floor(p.translate3d().x)>e(0)&&-1==k||Math.ceil(p.translate3d().x)<e(p.children("li").length-1)&&1==k}function g(a){a>=p.children("li").length-1||0>=a?(l=!0,a=Math.min(Math.max(a,0),p.children("li").length-1)):l=!1,c(a),J=Math.max(r.duration-1920/$(window).width()*Math.abs(t.velocity)*9*(r.duration/230)-(f()?m/15:0)*(r.duration/230),50),I=l?250*Math.abs(t.velocity)/$(window).width():0,i=p.translate3d().x,p.currentLandPos=e(a),cancelAnimationFrame(j),K=Date.now(),j=requestAnimationFrame(h)}function h(){var a=Date.now()-K;return p.trigger("changePos"),p.translate3d(i-easeOutBack(a,0,i-p.currentLandPos,J,I)),a>=J?void p.translate3d(p.currentLandPos):void(j=requestAnimationFrame(h))}var i=0,j=0,k=0,l=!1,m=0,n=!1,o=!1,p=this,q={duration:350,swipe_sensitivity:150,disable_slide:!1,disable_clicktoslide:!1,disable_scroll:!1,start:0,one_item:!1,pan_threshold:.3,disable_autowidth:!1,parent_width:!1,swipe_out:!1,infinite:!0},r=$.extend({},q,a);r.parent_width&&p.children().width(p.parent().outerWidth(!0));var s=function(){var a=0;return $(p).children().each(function(){a+=$(this).outerWidth()}),a},t={currentIndex:0,disable_autowidth:r.disable_autowidth,parent_width:r.parent_width,velocity:0,slideHeight:p.children().height(),childrenWidth:s(p),childrenCount:p.children().length},u=!1,v=!1;if(p.translate3d=function(a,b){if(null==a){var c=matrixToArray(this.css("transform"));if(null!=$.fn.jquery)return{x:parseFloat(isExplorer?c[12]:c[4]),y:parseFloat(isExplorer?c[13]:c[5])};var d=this.css("transform").replace("translate3d","").replace("(","").replace(")","").replace(" ","").replace("px","").split(",");return{x:parseFloat(d[0]),y:parseFloat(d[1])}}v&&(u=!0),this.css("transform","translate3d("+a+"px,"+(b||0)+"px, 0px)")},r.infinite){var w=$(p).children();for($(p).prepend(w.clone()),$(p).append(w.clone()),t.currentIndex=w.length,r.start=w.length;s(p)<2*$(p).width();)$(p).append(w.clone());var x=p.translate3d;p.translate3d=function(a,b){return null!=a?(a>-t.childrenWidth&&(a-=t.childrenWidth,t.currentIndex+=t.currentIndex<=t.childrenCount?t.childrenCount:0),a<-2*t.childrenWidth&&(a+=t.childrenWidth,t.currentIndex-=t.currentIndex>=2*t.childrenCount?t.childrenCount:0),console.log("changing active slide to"+t.currentIndex),c(t.currentIndex),x.call($(p),a,b)):x.call($(p),a,b)}}p.find("a").click(function(a){return console.log("click"),u?(u=!1,a.preventDefault(),!1):void 0}),p.end_animation=!0,r.swipe_out&&slideout(p,r,t),p.css({"touch-action":"pan-y","-webkit-user-select":"none","-webkit-touch-callout":"none","-webkit-user-drag":"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"}),r.disable_autowidth||p.css("width",p.children("li").length*p.children().outerWidth(!0)+10),p.translate3d(0),g(r.start);var y,z=!1,A=0,B=0,C=!1,D=0;p.savedSlideIndex=0,p.on("mousedown touchstart","li",function(a){v=!0,y="touchstart"==a.type?null==$.fn.jquery?a.changedTouches[0]:a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:a,p.end_animation&&(D=Date.now(),z=1,C=0,A=y.pageX,B=y.pageY,n=!1,o=!1,p.savedSlide=$(this),p.savedSlideIndex=p.savedSlide.index(),G=0,$(window).on("mousemove touchmove",b),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty())});var E=!0,F=0,G=0;$(window).on("mouseup touchend",function(a){if(v=!1,z){if(y="touchend"==a.type?null==$.fn.jquery?a.changedTouches[0]:a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:a,z=!1,$(window).off("mousemove touchmove"),n&&r.swipe_out)return n=!1,void p.swipeOut();if(p.end_animation&&!r.disable_slide){var b=Date.now()-D;if(t.velocity=-(y.pageX-A)/b,k=t.velocity>0?1:-1,m=(y.pageX-A)*k*-1,(y.pageX-A)*k<-6)return void g(d(t.velocity*r.swipe_sensitivity-p.translate3d().x))}p.savedSlide.index()==t.currentIndex||r.disable_clicktoslide||(a.preventDefault(),g(p.savedSlide.index()))}});try{p.mousewheel(function(a){if(!r.disable_scroll&&!n){a.preventDefault();var b=t.currentIndex-((0==a.deltaX?a.deltaY:a.deltaX)>0?1:-1);if(console.log("mouselanding = "+b),b>=p.children("li").length||0>b)return;t.velocity=0,g(b)}})}catch(H){}var I=0,J=r.duration,K=Date.now();p.gotoWithoutAnimation=function(a){c(a),t.currentIndex=a,p.currentLandPos=e(a),p.translate3d(e(a))},p.gotoSlide=function(a){g(a)},p.next=function(){g(t.currentIndex+1)},p.previous=function(){g(t.currentIndex-1)},p.reload=function(){t.parent_width&&this.children().width(this.parent().outerWidth(!0)),t.disable_autowidth||this.css("width",this.children("li").length*this.children().outerWidth(!0)+10),t.slideHeight=this.children().height(),t.velocity=0,this.gotoWithoutAnimation(t.currentIndex)},p.addSlide=function(a){this.append("<li>"+a+"</li>"),this.reload()},p.removeSlide=function(a){this.children(":nth-child("+(a+1||0)+")").remove()},p.getActiveIndex=function(){return t.currentIndex},p.getCurrentPos=function(){return this.translate3d().x}}});